<!DOCTYPE html>
<html><body>
<title>SHADOWS 2</title>
<script type="text/javascript" src = "../common/webgl-utils.js"></script>
<script type="text/javascript" src = "../common/initShaders.js"></script>
<script type="text/javascript" src = "../common/MV.js"></script>
<script type="text/javascript" src = "../common/OBJParser.js"></script>
<script type="text/javascript" src = "w9p2.js"></script>

<script id="vertex-shader-ground" type="x-shader/x-vertex">
    attribute vec3 vPosition;
    attribute vec2 vTexCoord;  

    varying vec2 fTexColor;

    uniform mat4 V; //view matrix
    uniform mat4 P; //projection matrix   // 45degrees
    uniform mat4 M;

    uniform vec3 lightPos;
    
    void main() {
        fTexColor   = vTexCoord;
        gl_Position = P*V*M*vec4(vPosition, 1.0);
    }
</script>

<script id="fragment-shader-ground" type="x-shader/x-fragment">
    precision mediump float;

    varying vec2 fTexColor;
    
    uniform sampler2D groundTex;

    void main() {
        gl_FragColor = texture2D(groundTex, fTexColor);
    }
</script>

<script id="vertex-shader-teapot" type="x-shader/x-vertex">
    attribute vec3 vPosition; 
    attribute vec3 vNormal;
    attribute vec4 vColor;

    varying vec4 a_color;
    
    uniform mat4 V; //view matrix
    uniform mat4 P; //projection matrix   // 45degrees
    uniform mat4 M; //model matrix

       void main(){
            gl_Position = P*V*M* vec4(vPosition, 1.0);
            a_color     = vec4(vNormal.y*vColor.rgb, vColor.a);
       }
</script>

<script id="fragment-shader-teapot" type="x-shader/x-fragment">
    precision mediump float;
    varying vec4 a_color;

    uniform bool isShadow;

    void main() {
        if(isShadow){
            gl_FragColor = vec4(0,0,0,0.65);
        } else {
            gl_FragColor = a_color;
        }
    }
</script>

</head>
<body>
    <canvas id="canvas" width="512" height="512"> The browser does not support the HTML5 canvas element. </canvas>
    <button id="toggleLightButton">Toggle Light Movement</button>
    <button id="toggleTeapotMovement"> Toggle Teapot Movement</button>
</body>
</html>




